/* ========================================================================== */
/*                                 MACROS                                     */
/* ========================================================================== */

/* Macros send a sequence of keycodes or commands in order when triggered  */
/* They're like recording and playing back a series of keypresses  */

/* ------------------------------------------------------------------ */
/*                       System Macros                                */
/* ------------------------------------------------------------------ */

rgb_ug_status_macro: rgb_ug_status_macro {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&rgb_ug RGB_STATUS>;
};

/* Screenshot - ⌘⇧4 (selection) */
screenshot: screenshot_macro {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&kp LG(LS(N4))>;
};

/* Hyper key macro - ⌘⌃⌥⇧ for Raycast/Alfred */
hyper_key: hyper_key_macro {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&sk LGUI>, <&sk LALT>, <&sk LCTRL>, <&sk LSHFT>;
};

/* ------------------------------------------------------------------ */
/*                     Bluetooth Macros                               */
/* ------------------------------------------------------------------ */

bt_select_0: bt_select_0 {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&out OUT_BLE>, <&bt BT_SEL 0>;
};

bt_select_1: bt_select_1 {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&out OUT_BLE>, <&bt BT_SEL 1>;
};

bt_select_2: bt_select_2 {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&out OUT_BLE>, <&bt BT_SEL 2>;
};

bt_select_3: bt_select_3 {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&out OUT_BLE>, <&bt BT_SEL 3>;
};

/* ------------------------------------------------------------------ */
/*                      Auto-Pair Macros                              */
/* Type opening + closing bracket, cursor moves to middle             */
/* ------------------------------------------------------------------ */

pair_paren: pair_parentheses {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&kp LPAR>, <&kp RPAR>, <&kp LEFT>;
};

pair_bracket: pair_brackets {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&kp LBKT>, <&kp RBKT>, <&kp LEFT>;
};

pair_brace: pair_braces {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&kp LBRC>, <&kp RBRC>, <&kp LEFT>;
};

pair_angle: pair_angle_brackets {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&kp LT>, <&kp GT>, <&kp LEFT>;
};

pair_dquote: pair_double_quotes {
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    bindings = <&kp DQT>, <&kp DQT>, <&kp LEFT>;
};

// AutoShift Helper- &AS main macro is chained to &AS_HT hold tap and &AS_Shifted macro - TailorKey
AS_Shifted_TKZ: AS_Shifted_TKZ {
    label = "&AS_SHIFTED_TKZ";
    compatible = "zmk,behavior-macro-one-param";
    #binding-cells = <1>;
    tap-ms = <0>;
    wait-ms = <0>;
    bindings = <&macro_press>
        , <&kp LSHFT>
        , <&macro_tap>
        , <&macro_param_1to1>
        , <&kp MACRO_PLACEHOLDER>
        , <&macro_release>
        , <&kp LSHFT>;
};

// AutoShift (Assign &AS to a Key) - &AS main macro is chained to &AS_HT hold tap and &AS_Shifted macro - TailorKey
AS_TKZ: AS_TKZ {
    label = "&AS_TKZ";
    compatible = "zmk,behavior-macro-one-param";
    #binding-cells = <1>;
    tap-ms = <0>;
    wait-ms = <0>;
    bindings = <&macro_press>
        , <&macro_param_1to1>
        , <&macro_param_1to2>
        , <&AS_HT_v2_TKZ MACRO_PLACEHOLDER MACRO_PLACEHOLDER>
        , <&macro_pause_for_release>
        , <&macro_release>
        , <&macro_param_1to1>
        , <&macro_param_1to2>
        , <&AS_HT_v2_TKZ MACRO_PLACEHOLDER MACRO_PLACEHOLDER>;
};

// Cursor Layer - Extent Line (seq) - TailorKey
cur_EXTEND_LINE_macos_TKZ: cur_EXTEND_LINE_macos_TKZ {
    label = "&CUR_EXTEND_LINE_MACOS_TKZ";
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    tap-ms = <1>;
    wait-ms = <1>;
    bindings = <&kp LG(LS(RIGHT))>;
};

// Cursor Layer - Extend Word (seq) - TailorKey
cur_EXTEND_WORD_macos_TKZ: cur_EXTEND_WORD_macos_TKZ {
    label = "&CUR_EXTEND_WORD_MACOS_TKZ";
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    tap-ms = <1>;
    wait-ms = <1>;
    bindings = <&kp LA(LS(RIGHT))>;
};

// Cursor Layer macos - Select Line (seq) - TailorKey
cur_SELECT_LINE_macos_TKZ: cur_SELECT_LINE_macos_TKZ {
    label = "&CUR_SELECT_LINE_MACOS_TKZ";
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    tap-ms = <1>;
    wait-ms = <1>;
    bindings = <&kp LG(LEFT)>
        , <&kp LG(LS(RIGHT))>;
};

// Cursor Layer - Select Word (seq) - TailorKey
cur_SELECT_WORD_macos_TKZ: cur_SELECT_WORD_macos_TKZ {
    label = "&CUR_SELECT_WORD_MACOS_TKZ";
    compatible = "zmk,behavior-macro";
    #binding-cells = <0>;
    tap-ms = <1>;
    wait-ms = <1>;
    bindings = <&kp LA(LEFT)>
        , <&kp LA(LS(RIGHT))>;
};

// mod_tab_switcher_chord -  TailorKey
mod_tab_chord_v2_TKZ: mod_tab_chord_v2_TKZ {
    label = "&MOD_TAB_CHORD_V2_TKZ";
    compatible = "zmk,behavior-macro-two-param";
    #binding-cells = <2>;
    tap-ms = <0>;
    wait-ms = <0>;
    bindings = <&macro_press>
        , <&macro_param_2to1>
        , <&mo MACRO_PLACEHOLDER>
        , <&macro_press>
        , <&macro_param_1to1>
        , <&mod_tab_v2_TKZ MACRO_PLACEHOLDER>
        , <&macro_pause_for_release>
        , <&macro_release>
        , <&macro_param_1to1>
        , <&mod_tab_v2_TKZ MACRO_PLACEHOLDER>
        , <&macro_release>
        , <&macro_param_2to1>
        , <&mo MACRO_PLACEHOLDER>;
};

// mod_tab_switcher - TailorKey
mod_tab_v2_TKZ: mod_tab_v2_TKZ {
    label = "&MOD_TAB_V2_TKZ";
    compatible = "zmk,behavior-macro-one-param";
    #binding-cells = <1>;
    tap-ms = <0>;
    wait-ms = <0>;
    bindings = <&macro_press>
        , <&macro_param_1to1>
        , <&kp MACRO_PLACEHOLDER>
        , <&macro_tap>
        , <&kp TAB>
        , <&macro_pause_for_release>
        , <&macro_release>
        , <&macro_param_1to1>
        , <&kp MACRO_PLACEHOLDER>;
};
